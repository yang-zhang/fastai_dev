---

title: Title
keywords: fastai
sidebar: home_sidebar

summary: "summary"
---
<!--


#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: dev/14a_callback_data.ipynb
# instructions: https://docs.fast.ai/gen_doc_main.html

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">local.notebook.showdoc</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">local.test_utils</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CollectDataCallback" class="doc_header"><code>class</code> <code>CollectDataCallback</code><a href="https://github.com/fastai/fastai_dev/tree/master/dev/local/callback/data.py#L14" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CollectDataCallback</code>() :: <a href="/learner.html#Callback"><code>Callback</code></a></p>
</blockquote>
<p>Collect all batches, along with <code>pred</code> and <code>loss</code>, into <code>self.data</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="WeightedSampleCallback" class="doc_header"><code>class</code> <code>WeightedSampleCallback</code><a href="https://github.com/fastai/fastai_dev/tree/master/dev/local/callback/data.py#L20" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>WeightedSampleCallback</code>(<strong><code>wgts</code></strong>, <strong><code>learn</code></strong>=<em><code>None</code></em>) :: <a href="/learner.html#Callback"><code>Callback</code></a></p>
</blockquote>
<p>Use weighted sampling in <a href="/dataloader.html#DataLoader"><code>DataLoader</code></a></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Learner.weighted_sampler" class="doc_header"><code>Learner.weighted_sampler</code><a href="https://github.com/fastai/fastai_dev/tree/master/dev/local/callback/data.py#L46" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Learner.weighted_sampler</code>(<strong><code>wgts</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">160</span>

<span class="n">dbch</span> <span class="o">=</span> <span class="n">DataSource</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">float</span><span class="p">(),</span> <span class="p">[[</span><span class="n">noop</span><span class="p">],[</span><span class="n">noop</span><span class="p">]],</span> <span class="n">splits</span><span class="o">=</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),[]])</span> \
    <span class="o">.</span><span class="n">databunch</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">learn</span> <span class="o">=</span> <span class="n">synth_learner</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dbch</span><span class="p">,</span> <span class="n">cb_funcs</span><span class="o">=</span><span class="n">CollectDataCallback</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">weighted_sampler</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">learn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">concat</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">learn</span><span class="o">.</span><span class="n">collect_data</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(#4) [0,7.058053077367644e+27,None,00:00]
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
</div>
 

